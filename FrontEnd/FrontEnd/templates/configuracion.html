<!DOCTYPE html>
<html lang="es">
<head>
    <title>Cargar Configuración</title>
    <!-- Enlace a Bootstrap 5 -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <link href="/static/style.css" rel="stylesheet">
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
    <script>
        function loadFile(event) {
            var reader = new FileReader();
            reader.onload = function(){
            var output = document.getElementById('inputXml');
            output.value = reader.result;
            };
            reader.readAsText(event.target.files[0]);
        };

        function validateForm() {
            var content = document.getElementById('inputXml').value;
            if (content === "") {
            alert("No se ha cargado ningún archivo XML. Por favor, carga un archivo antes de cargar.");
            return false;
            }
            alert("Archivo cargado correctamente.");
            return true;
        }
    </script>
</head>
<body>
<!-- Navbar -->
{% include 'navbar.html' %}
    <!-- Formulario -->
    <div class="container">
        <h1 class="my-4">Cargar Configuración</h1>
        <form action="/grabarConfiguracion" method="post" enctype="multipart/form-data" class="mb-4" onsubmit="return validateForm()">
            {% csrf_token %}
            <div class="form-group">
                <label for="configFile">Selecciona el archivo de configuración:</label>
                <input type="file" id="configFile" name="configFile" accept=".xml" onchange="loadFile(event)" class="form-control-file">
            </div>
            <div class="form-group">
                <label for="inputXml">Contenido del archivo:</label>
                <textarea id="inputXml" rows="10" class="form-control"></textarea>
            </div>
            <input type="submit" value="Cargar" class="btn btn-primary btn-sm">
        </form>
        <h2>Respuesta:</h2>
        <textarea id="responseXml" rows="10" class="form-control ">{{ response_xml|safe }}</textarea>
    </div>
</body>
</html>